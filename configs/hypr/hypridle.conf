# ── General settings ─────────────────────────────────────────────
general {
    lock_cmd = pidof hyprlock || hyprlock       # run hyprlock only if not already running
    before_sleep_cmd = loginctl lock-session    # lock before suspend
    after_sleep_cmd = hyprctl dispatch dpms on  # wake screen properly
    inhibit_sleep = 2                           # auto mode (locks before sleep if hyprlock is used)
}

# ── Listener: Dim screen after 2.5 min ─────────────────────────────
listener {
    timeout = 150                                # 2.5 minutes
    on-timeout = brightnessctl -s set 10         # dim brightness (avoid 0, esp. for OLED)
    on-resume = brightnessctl -r                 # restore brightness
}

# ── Listener: Turn off keyboard backlight ─────────────────────────
# Comment this block if you don’t have a keyboard backlight
listener {
    timeout = 150
    on-timeout = brightnessctl -sd rgb:kbd_backlight set 0
    on-resume  = brightnessctl -rd rgb:kbd_backlight
}

# ── Listener: Lock screen after 4 min ─────────────────────────────
listener {
    timeout = 240
    on-timeout = loginctl lock-session
}

# ── Listener: Turn off display after 5.5 min ──────────────────────
listener {
    timeout = 330
    on-timeout = hyprctl dispatch dpms off
    on-resume  = hyprctl dispatch dpms on && brightnessctl -r
}

# ── Listener: Suspend after 30 min ────────────────────────────────
#listener {
#    timeout = 1800
#    on-timeout = systemctl suspend
#}
